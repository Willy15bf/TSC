\documentclass[11pt]{article}
\usepackage{anysize} 
\marginsize{2cm}{2cm}{2cm}{2cm} 

\usepackage{multirow}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage{hyperref}
\usepackage{fixltx2e}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{adjustbox}
\usepackage{subcaption}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%	headers & footers							%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\rhead{Taller de Sistemas Computacionales}
\lhead{Segundo Semestre 2014}
\rfoot{Página \thepage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%	comandos									%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\labno}{1}
\newcommand{\labtitle}{Taller de Sistemas Computacionales}
\newcommand{\nameone}{Iván González López}
\newcommand{\emailone}{ivan.gonzalezlo@alumnos.usm.cl}
\newcommand{\rolone}{2973523-9}
\newcommand{\nametwo}{Guillermo Baeza}
\newcommand{\emailtwo}{guillermo.baeza@alumnos.usm.cl}
\newcommand{\roltwo}{2973600-6}

\begin{document}
\begin{titlepage}
\begin{center}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%	título página inicial						%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\includegraphics[width=70pt]{logos/utfsm.pdf} \\
{\Large \textsc{Universidad Técnica Federico Santa María} \\}
{\Large \textsc{Departamento de Informática} \\ \vspace{4pt}}
{\rule[13pt]{\textwidth}{1pt} \\ \vspace{25pt}}
{\LARGE \textsc{Tarea No. \labno} \\}
{\LARGE \textsc{\labtitle} \\ \vspace{50pt}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%	autores										%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{minipage}{0.4\textwidth}
\begin{flushleft}
{\large \nameone} \\
\emailone \\
\rolone
\end{flushleft}
\end{minipage}
\hfill
\begin{minipage}{0.4\textwidth}
\begin{flushright}
{\large \nametwo} \\
\emailtwo \\
\roltwo
\end{flushright}
\end{minipage}
\end{center}
\end{titlepage}


\section{Descripción}
Mediante el software de virtualización VirtualBox, se crearán dos máquinas virtuales de la distribución de Linux CentOS 6.5 x86, en su versión desktop (full) y minimal (sin entorno gráfico). Para ambas versiones, se registrará su tiempo de instalación, uso de recursos, y además de configurar una red NAT y otra bridge dentro de ellas.   

\section{Análisis y Desarrollo}
\subsection{Instalación}
Las imágenes iso, fueron descargadas del repositorio de la Universidad, \url{ftp://ftp.inf.utfsm.cl/pub/Linux/CentOS/6.5/isos/i386/}. Las máquinas virtuales, fueron configuradas para disponer de una memoria principal de 1024 MB y una memoria secundaria de almacenamiento de 10 GB. La versión mínima tomó alrededor de siete minutos en instalarse, en tanto que a la versión desktop le tomó un poco más de nueve minutos.
	\subsubsection{CentOS minimal version}
		\begin{enumerate}
			\item 
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/primera.png}
			          }
			          \medskip
			          \\Luego de iniciar la máquina virtual, en el menú de inicio, seleccionar la primera opción, instalar o actualizar un sistema existente.
			    \end{minipage}
			
			\item Puesto que se trata de un máquina virtual, omitir el chequeo de los dispositivos de DVD o usb.
			\item Elegir el idioma utilizado para realizar la instalación.
			\item Elegir la distribución del teclado.

			\item 
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/diskN.png}
			          }
			          \medskip
			          \\En caso de contar con dispositivos de almacenamiento especializados como iSCSI, SAN, etc, marcar la segunda opción, sino, la primera es la que se elige. Dar en siguiente.
			    \end{minipage}			

			\item El disco que se utilizará para la instalcion ha sido detectado, confirmar el descarte de todos los datos.
			\item Escribir el nombre del computador o hostname.
			\item 				
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/red.png}
			          }
			          \medskip
			          \\Dar click en el boton \textbf{Configure la red}. Seleccionar la interfas System eth0.
			    \end{minipage}	

			\item
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/red2.png}
			          }
			          \medskip
			          \\Posteriormente, dar click en editar y marcar el checkbox \textbf{Conectar automáticamente}. Dar click a Aplicar. Luego hacer click en Cerrar y después Siguiente.
			    \end{minipage}	

			\item 
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/huso.png}
			          }
			          \medskip
			          \\Elegir la zona horaria, dependiendo de la ubicación geográfica. Siguiente. 
			    \end{minipage}	
			
			\item Escribir la contraseña del usuario root. Confirmar la contraseña. Siguiente.
			\item 
				\begin{minipage}[t]{\linewidth}
			          \raggedright
			          \adjustbox{valign=t}{
			            \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/particion.png}
			          }
			          \medskip
			          \\Proceso de particionado del disco virtual. Elegir usar todo el espacio. Siguiente. 
			    \end{minipage}	

			\item Confirmar \textbf{Escribir cambios al disco}.

			\item 
				\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/instalacion.png}
			        }
			        \medskip
			        \\Comienza el proceso de instalación. 
		        \end{minipage}	

		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/fin.png}
			        }
			        \medskip
			        \\Instalación finalizada. Reiniciar. 
		        \end{minipage}	

		   	\item 
		   		\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/MIN/uname.png}
			        }
			        \medskip
			        \\Tipear el nombre de usuario root y su contraseña. Listo. 
		        \end{minipage}			   
		\end{enumerate}

	\subsubsection{CentOS desktop version}	
		\begin{enumerate}
			\item 
				\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/boot-menu.png}
			        }
			        \medskip
			        \\Luego de iniciar la máquina virtual, en el menú de inicio, seleccionar la opción \textbf{Boot} o iniciar. 
		        \end{minipage}

		    \item
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/desktop.png}
			        }
			        \medskip
			        \\Dentro del escritorio, hacer doble click sobre el ícono \textbf{Install to Hard Drive}. 
		        \end{minipage}	

		    \item Hacer click en Siguiente, en el asistente de instalación.
		    \item Seleccionar la distribución del teclado. Siguiete.
		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/almacenamiento.png}
			        }
			        \medskip
			        \\En caso de contar con dispositivos de almacenamiento especializados como iSCSI, SAN, etc, marcar la segunda opción, sino, la primera es la que se elige. Dar en siguiente. 
		        \end{minipage}	

		    \item Escribir el nombre del computador o hostname.
		    \item Escoger la zona horaria, dependiendo de la ubicación geográfica. Siguiente.
		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/root-password.png}
			        }
			        \medskip
			        \\Suministrar la contraseña del usuario root. Confirmar. Siguiente. 
		        \end{minipage}

		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/particion.png}
			        }
			        \medskip
			        \\Proceso de particionado del disco virtual. Elegir usar todo el espacio. Siguiente. 
		        \end{minipage}

		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/instalacion.png}
			        }
			        \medskip
			        \\Instalación del sistema Se copian todos los archivos necesarios al disco virtual. 
		        \end{minipage}

		    \item
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/setup.png}
			        }
			        \medskip
			        \\Proceso de configuración post instalación. Siguiente. 
		        \end{minipage}

		    \item 
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/licencia.png}
			        }
			        \medskip
			        \\Leer y aceptar acuerdo de licencia. Siguiente. 
		        \end{minipage}

		    \item Crear una nueva cuenta de usuario, para poder utilizar el sistema.
		    \item Ingresar hora y fechas actuales.
		    \item Kdump. Este es el último del asistente de configuración, donde pregunta si Kdump debe ser activado o no. Dejar los valores por defecto. Finalizar.

		    \item
		    	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/login.png}
			        }
			        \medskip
			        \\Después de reiniciado el sistema, se presentará la pantalla de login para iniciar sesión. 
		        \end{minipage}

	        \item
	        	\begin{minipage}[t]{\linewidth}
			        \raggedright
			        \adjustbox{valign=t}{
			        \includegraphics[width=.45\linewidth]{screenshots/instalacion/FULL/CentOS.png}
			        }
			        \medskip
			        \\Después de iniciar sesión, se presentará el escritorio de CentOS 6.5 Desktop.
		        \end{minipage}
		    
		    \end{enumerate}

		    
\subsection{Rendimiento}
Respecto del consumo de recursos de ambos sistemas, se podía anticipar con certeza que, CentOS en su versión mínima, es más eficiente que en su versión de escritorio, dado que, entre otras diferencias, la versión mínima no cuenta con un entorno de escritorio gráfico como Gnome. Es así como CentOS mínimo, ocupa alrededor de $91.744 [MB]$ de memoria principal; en cambio CentOS desktop ocupa alrededor de $336.208 [MB]$ de memoria principal. Respecto del espacio requerido en el disco duro virtual, para la instalación del sistema operativo, se tiene que en la versión mínima, la partición raíz (``/''), con un espacio disponible de $8.7 [GB]$, ocupa $728 [MB]$ equivalentes al 9\% del total de la partición; en cambio la version desktop, con un partición raíz del mismo tamaño, ocupa $4.8 [GB]$ equivalentes al 58\% de esta.  

\textbf{Screenshots de los comandos \textit{top}, \textit{df} y \textit{free} ejecutados en consola, se encuentran dentro del directorio \textit{screenshots/rendimiento}, divididos por versión del SO CentOS (FULL Y MIN).}


\subsection{Configuración de Red}
\subsubsection{Red NAT}
En VirtualBox, este es el modo de red por defecto en las nuevas máquinas virtuales. Cuando el sistema operativo invitado inicia, típicamente utiliza DHCP para obtener una dirección IP. VirtualBox alineará esta petición DHCP y le comunicará al OS invitado su dirección IP asignada y la puerta de enlace para el enrutamiento de las conexiones salientes. En este modo, cada máquina virtual es asignada a la misma dirección IP (\textbf{10.0.2.15}) porque cada una de estas piensa que están en su propia red aislada. Y cuando estas envían su tráfico a través de la puerta de enlace (10.0.2.2), VirtualBox reescribe los paquetes para hacerlos parecer que fueron enviados desde el Host, en vez del OS invitado (dentro del Host o huésped).
Esto significa que el OS invitado, funcionará incluso si el Host se mueve desde una red a otra (como un notebook moviéndose en distintas ubicaciones), y desde conexiones inalámbricas a conexiones cableadas también. La estructura lógica de una red de este tipo, se ve de la siguiente forma:


	\begin{figure}[ht]
	\center
	\includegraphics[width=0.5\linewidth, height=5cm]{screenshots/networking/nat/nat-network.png} 
	\caption{Esquema de una red NAT}
	\end{figure}

\subsubsection{Red bridge}
	Redes tipo bridge son usadas cuando se quiere que la máquina virtual sea un miembro completo de la red, i.e. que se comporte igual que la máquina huésped en la red. En este modo, un NIC virtual es ``puenteado'' a un NIC físico en el host, de la siguiente forma:

	\clearpage

	\begin{figure}[ht]
	\center
	\includegraphics[width=0.5\linewidth]{screenshots/networking/bridge/MIN/bridge-mv-min.png}
	\caption{Ventana de configuración de red de VirtualBox.}
	\end{figure}

	El efecto en esto es que cada MV tiene acceso a la red física en la misma forma que el host. Puede acceder cualquier servicio en la red como por ejemplo servicios DHCP externos, servicios de búsqueda de nombre e información de ruteo, tal como el host lo hace. La estructura lógica de la red, se ve de esta forma:

	\begin{figure}[ht]
	\center
	\includegraphics[width=0.75\linewidth]{screenshots/networking/bridge/bridge-network.png} 
	\caption{Esquema de una red bridge} 
	\end{figure}

En el caso de la presente tarea, con ambas máquinas virtuales corriendo simultaneamente, estas obtienen su dirección IP desde el servicio DHCP de la Universidad. Es así como la versión mínima de CentOS, obtuvo una dirección IP igual a \textbf{10.6.229.163}. En cambio la versión desktop, una dirección IP igual a \textbf{10.6.229.163}. Nótese la diferencia cuando se tenían configuradas, ambas máquinas virtuales con NAT, donde estas tenían la misma dirección IP (\textbf{10.0.2.15}), dada por la máquina host.

\subsection{Archivos de configuración de red}
Los archivos de configuración de red, son principalmente:
\begin{itemize}
	\item \textbf{/etc/hosts} el principal propósito de este archivo es resolver los nombres de host que no pueden ser resueltos de ninguna otra forma. También puede ser usado para resolver los nombres de host en redes pequeñas que no cuentan con un servidor DNS. A pesar del tipo de red en la cual el computador se encuentra, este archivo debería contener una linea especificando la dirección IP del dispositivo loopback (\textbf{127.0.0.1}) como \textbf{localhost.localdomain}.

	\item \textbf{/etc/resolv.conf} Este archivo especifica la dirección IP de los servidores DNS y el dominio de búsqueda. A menos que haya sido configurado de otra manera, los scripts de inicialización de red, llenan este archivo. 

	\item \textbf{/etc/sysconfig/network-scripts/ifcfg-[nombre-interfaz]} Para cada interfaz, hay un correspondiente script de configuración de interfaz. Cada uno de estos archivos provee información específica de una interfaz de red en particular. En el caso de la presente tarea, el nombre de la interfaz utilizada es \textbf{eth0}.
\end{itemize}

\textbf{Screenshots de los archivos de configuración mencionados anteriormente, se encuentran dentro del directorio \textit{screenshots/networking}, separados por tipo de red (bridge o NAT) y luego por versión del SO CentOS (FULL Y MIN).}


\begin{table}[h]
\begin{tabular}{cc|ccccccc|cc|}
     &       & $x_1$ & $x_2$ & $s_3$ & $e_1$ & $e_2$ & $a_1$ & $a_2$ &     &        \\
Base & $C_j$    & -3 & -5 & 0   & 0  & 0  & M  & M  & $b_i$  & $b_i/a_{ij}$ \\ \hline
$x_2$   & -5    & 0  & 1  & 1   & 0  & 0  & 0  & 0  & 3   &        \\
$e_2$   & 0     & 0  & 0  & 13  & 1  & 8  & -1 & -8 & 27  &        \\
$a_1$   & -3    & 1  & 0  & 2   & 0  & 1  & 0  & -1 & 4   &        \\ \hline
     & $z_j$    & -3 & -5 & -11 & 0  & -3 & 0  & 3  & -27 &        \\
     & $C_j-z_j$ & 0  & 0  & 11  & 0  & 3  & M  &    &     &       
\end{tabular}
\end{table}


\section{Referencias}
	\begin{itemize}
		\item \url{https://blogs.oracle.com/fatbloke/entry/networking_in_virtualbox1}
		\item \url{http://serverfault.com/questions/229860/vmware-networking-mode-nat-or-bridged}
		\item \url{http://blog-rat.blogspot.com/2009/05/bridged-vs-host-only-vs-nat.html}
		\item \url{http://www.faqs.org/docs/securing/chap9sec90.html}
		\item \scriptsize \url{https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/4/html/Reference_Guide/ch-networkscripts.html}
		\item \scriptsize \url{http://extr3metech.wordpress.com/2013/05/23/configuring-network-in-centos-6-3-virtual-box-screenshots/}
	\end{itemize}
\end{document}
